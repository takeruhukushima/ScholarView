{
  "lexicon": 1,
  "id": "sci.peer.article",
  "defs": {
    "citation": {
      "type": "object",
      "required": ["key", "rawBibtex"],
      "properties": {
        "key": { "type": "string", "description": "BibTeX citation key" },
        "rawBibtex": { "type": "string", "description": "Raw BibTeX entry" }
      }
    },
    "block": {
      "type": "object",
      "required": ["level", "heading", "content"],
      "properties": {
        "level": {
          "type": "integer",
          "minimum": 1,
          "maximum": 6,
          "description": "階層の深さ。1:section, 2:subsection, 3:subsubsection..."
        },
        "heading": { "type": "string", "description": "セクションの見出し" },
        "content": { "type": "string", "description": "TeXまたはMarkdown形式の本文" }
      }
    },
    "imageAsset": {
      "type": "object",
      "required": ["path", "blob"],
      "properties": {
        "path": { "type": "string", "description": "本文中で参照される画像パス" },
        "alt": { "type": "string", "description": "画像の代替テキスト（任意）" },
        "blob": {
          "type": "blob",
          "accept": ["image/*"],
          "maxSize": 10000000
        }
      }
    },
    "main": {
      "type": "record",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["title", "blocks", "createdAt"],
        "properties": {
          "title": { "type": "string", "maxLength": 300, "description": "論文または実験計画のタイトル" },
          "blocks": {
            "type": "array",
            "description": "論文を構成する任意のセクション配列（フラット構造）",
            "items": { "type": "ref", "ref": "#block" }
          },
          "bibliography": {
            "type": "array",
            "description": "本文で使用する引用エントリ",
            "items": { "type": "ref", "ref": "#citation" }
          },
          "images": {
            "type": "array",
            "description": "本文で使用する画像blobの参照",
            "items": { "type": "ref", "ref": "#imageAsset" }
          },
          "createdAt": { "type": "string", "format": "datetime" }
        }
      }
    }
  }
}
